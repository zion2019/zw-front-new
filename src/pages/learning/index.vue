<template>
  <MacOSLayout>
    <div class="page-container">
      <!-- å­¦ä¹ &å¤ä¹ å…¥å£ -->
      <div class="entry-section">
        <div class="entry-card anime-element card-base" @click="goToLearning">
          <div class="entry-content">
            <div class="entry-title entry-title-bold">
              Learning
            </div>
            <div class="entry-count">
              {{ learningStats.subjectCnt }}
            </div>
          </div>
        </div>
        <div class="entry-card anime-element card-base" @click="goToReview">
          <div class="entry-content">
            <div class="entry-title entry-title-bold">
              Review
            </div>
            <div class="entry-count warning-text">
              {{ learningStats.reviewCnt }}
            </div>
          </div>
        </div>
      </div>

      <!-- å¿«æ·æ“ä½œ -->
      <div class="section">
        <div class="section-header">
          <h2>å¿«æ·æ“ä½œ</h2>
        </div>
        <div class="quick-actions">
          <div class="quick-action anime-element card-base" @click="goToLearnKnowledge">
            <div class="quick-action-icon">
              ğŸ’¡
            </div>
            <div class="quick-action-text">
              è®°å½•ä¸ªæ–°çŸ¥è¯†
            </div>
          </div>
          <div class="quick-action anime-element card-base" @click="goToTagManagement">
            <div class="quick-action-icon">
              ğŸ·ï¸
            </div>
            <div class="quick-action-text">
              æ ‡ç­¾ç®¡ç†
            </div>
          </div>
          <div class="quick-action anime-element card-base" @click="goToStrategyManagement">
            <div class="quick-action-icon">
              ğŸ“‹
            </div>
            <div class="quick-action-text">
              å­¦ä¹ ç­–ç•¥
            </div>
          </div>
        </div>
      </div>

      <!-- ç»Ÿè®¡ä¿¡æ¯ -->
      <div class="statistics-section anime-element card-base">
        <div class="stat-item">
          <div class="stat-value">
            {{ learningStats.totalSubjects }}
          </div>
          <div class="stat-label">
            æ‰€æœ‰ç§‘ç›®
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-value">
            {{ learningStats.totalKnowledgePoints }}
          </div>
          <div class="stat-label">
            çŸ¥è¯†ç‚¹
          </div>
        </div>
        <div class="stat-item">
          <div class="stat-value">
            {{ learningStats.masteredKnowledgePoints }}
          </div>
          <div class="stat-label">
            æŒæ¡çŸ¥è¯†ç‚¹
          </div>
        </div>
      </div>
    </div>
  </MacOSLayout>
</template>

<script setup lang="ts">
import { onMounted, ref } from 'vue'
import MacOSLayout from '@/components/MacOSLayout.vue'

// å­¦ä¹ ç»Ÿè®¡æ•°æ®
const learningStats = ref({
  subjectCnt: 2,
  reviewCnt: 10,
  totalSubjects: 2,
  totalKnowledgePoints: 20,
  masteredKnowledgePoints: 18,
})

// è·³è½¬åˆ°å­¦ä¹ é¡µé¢
function goToLearning() {
  uni.navigateTo({
    url: '/pages/learning/subject/subject-list',
  })
}

// è·³è½¬åˆ°å¤ä¹ é¡µé¢
function goToReview() {
  uni.navigateTo({
    url: '/pages/learning/practice/index',
  })
}

// è·³è½¬åˆ°æ¶¨ä¸ªçŸ¥è¯†é¡µé¢
function goToLearnKnowledge() {
  uni.navigateTo({
    url: '/pages/learning/knowledge/knowledge-edit',
  })
}
// è·³è½¬åˆ°æ ‡ç­¾ç®¡ç†é¡µé¢
function goToTagManagement() {
  uni.navigateTo({
    url: '/pages/learning/tag/tag-list',
  })
}

// è·³è½¬åˆ°å­¦ä¹ ç­–ç•¥ç®¡ç†é¡µé¢
function goToStrategyManagement() {
  uni.navigateTo({
    url: '/pages/learning/strategy/strategy-list',
  })
}
// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®
onMounted(() => {
  console.log('å­¦ä¹ é¦–é¡µåŠ è½½')
})
</script>

<style scoped>
@import '../../theme/macos.css';

.page-container {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.page-header {
  text-align: center;
  margin-bottom: 30px;
}

.page-title {
  font-size: 32px;
  font-weight: 700;
  margin: 0;
  color: #333;
}

/* å…¥å£åŒºåŸŸ */
.entry-section {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 30px;
}

@media (max-width: 768px) {
  .entry-section {
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }
}

.entry-card {
  padding: 24px;
  display: flex;
  align-items: center;
  gap: 20px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.entry-card:hover {
  transform: translateY(-2px);
}

.entry-icon {
  font-size: 48px;
}

.entry-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.entry-title {
  font-size: 18px;
  font-weight: 500;
  color: #333;
}

.entry-title-bold {
  font-weight: 700;
}

.entry-count {
  font-size: 32px;
  font-weight: 700;
  color: var(--macos-blue);
}

.warning-text {
  color: var(--macos-red);
}

/* å…¬å…±å¡ç‰‡æ ·å¼ */
.card-base {
  background: white;
  border-radius: var(--macos-radius-large);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  transition: all 0.3s ease;
  border: 2px solid #000;
  box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.1);
}

.card-base:hover {
  box-shadow: 6px 6px 0 rgba(0, 0, 0, 0.15);
  transform: translate(-2px, -2px);
}

/* å¿«æ·æ“ä½œ */
.section {
  margin-bottom: 30px;
}

.section-header {
  margin-bottom: 16px;
}

.section-header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  color: #333;
}

.quick-actions {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.quick-action {
  padding: 16px 20px;
  display: flex;
  align-items: center;
  gap: 16px;
  cursor: pointer;
}

.quick-action:hover {
  background: #fafafa;
}

.quick-action-icon {
  font-size: 32px;
}

.quick-action-text {
  font-size: 16px;
  font-weight: 600;
  color: #333;
}

.card-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding-bottom: 12px;
  border-bottom: 2px solid #f0f0f0;
}

.card-icon {
  font-size: 24px;
}

.card-title {
  font-size: 18px;
  font-weight: 600;
  color: #333;
}

.card-body {
  flex: 1;
  min-height: 120px;
}

.empty-content {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--macos-gray);
  font-size: 14px;
}

.tags-list,
.strategies-list {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.tag-item,
.strategy-item {
  padding: 6px 12px;
  background: var(--macos-blue);
  color: white;
  border-radius: var(--macos-radius);
  font-size: 12px;
  font-weight: 500;
}

/* ç»Ÿè®¡ä¿¡æ¯ */
.statistics-section {
  padding: 24px;
  display: flex;
  justify-content: space-around;
  align-items: center;
  flex-wrap: wrap;
  gap: 24px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  min-width: 100px;
}

.stat-value {
  font-size: 36px;
  font-weight: 700;
  color: var(--macos-blue);
}

.stat-label {
  font-size: 14px;
  color: var(--macos-dark-gray);
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .page-container {
    padding: 16px;
  }

  .management-section {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  .statistics-section {
    gap: 16px;
  }

  .stat-item {
    min-width: calc(50% - 8px);
  }

  .page-title {
    font-size: 24px;
  }
}
</style>
